<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="text/javascript">
	var EventUtil = {
		addHandler: function (element, type, handler) {
			if (element.addEventListener) {
				element.addEventListener(type, handler, false);
			} else if (element.attachEvent) {
				element.attachEvent("on" + type, handler);
			} else {
				element["on" + type] = handler;
			}
		},
		getEvent: function (event) {
			return event ? event : window.event;
		},
		getTarget: function(event) {
			return event.target || event.srcElement;
		},
		getRelatedTarget: function(event) {
			if (event.relatedTarget) {
				return event.relatedTarget;
			} else if(event.toElement) {
				return event.toElement;
			} else if(event.fromElement) {
				return event.fromElement;
			} else {
				return null;
			}
		},
		getButton: function (event) {
			if (document.implementation.hasFeature("MouseEvents", "2.0")) {
				return event.button;
			} else {
				switch(event.button) {
					case 0:
					case 1:
					case 3:
					case 5:
					case 7:
						return 0;
					case 2:
					case 6:
						return 2;
					case 4:
						return 1;
				}
			}
		},
		getWheelDelta: function (event) {
			// if (event.wheelDelta) {
			// 	return (client.engine.opera && client.engine.opera < 9.5 ?
			// 			-event.wheelDelta : event.wheelDelta);
			// } else {
			// 	return -event.detail * 40;
			// }
		},
		preventDefault: function (event) {
			if (event.preventDefault) {
				event.preventDefault();
			} else {
				event.returnValue = false;
			}
		},
		removeHandler: function(element, type, handler) {
			if (element.removeEventListener) {
				element.removeEventListener(type, handler, false);
			} else if (element.detachEvent) {
				element.detachEvent("on" + type, handler);
			} else {
				element["on" + type] = null;
			}
		},
		stopPropagation: function(event) {
			if (event.stopPropagation) {
				event.stopPropagation();
			} else {
				event.cancelBubble = true;
			}
		}
	};
//  IndexedDB设计的操作完全是异步进行的
//  浏览器也都使用提供商前缀
var indexedDB = window.indexedDB || window.msIndexDB || window.mozIndexDB || window.webkitIndexDB;

//  1、数据库
//  IndexedDB就是一个数据库
//  IndexDB最大的特色是使用对象保存数据，而不是使用表来保存数据

//  indexDB.open()会返回一个IDBRequest对象，如果传入的数据库存在就打开，如果不存在就创建并打开
//  在这个对象上可以添加onerror和onsuccess事件处理程序。

var request, database;
request = indexedDB.open("admin");
request.onerror = function (event) {
	console.log("Something bad happened while trying to open:" + event.target.errorCode);
};
request.onsuccess = function (event) {
	database = event.target.result;

	//  默认情况下，indexedDB数据库是没有版本号的，最好一开始就为数据库指定一个版本号。
	//  可以调用setVersion()方法，传入以字符串形式表示的版本号。
	//  同样调用这个方法也会返回一个请求对象，需要你再指定事件处理程序
	if (database.version != "1.0") {
		request = database.setVersion("1.0");
		request.onerror = function (event) {
			console.log("Something bad happend while trying to set version:" + event.target.errorCode);
		}
		request.onsuccess = function (event) {
			console.log("Database initialization complete. Database name: " + database.name + ",Version: " + database.version);
		};
	} else {
		console.log("Database already initialization complete. Database name: " + database.name + ",Version: " + database.version);
	}
};






</script>
</body>
</html>