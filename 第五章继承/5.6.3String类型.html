<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="text/javascript">
    //  在使用第二个参数的情况下，可以通过循环调用indexOf()或lastIndexOf()来找到所有匹配的子字符串
    (function(){
       var stringValue = "Lorem ipsum dolor sit amet, consectetur adipisicing elit";
       var positions = new Array();
       var pos = stringValue.indexOf("e");

       while (pos > -1) {
       	  positions.push(pos);
       	  pos = stringValue.indexOf("e", pos + 1);
       }

       console.log(positions);

       //  字符串的模式匹配方法
       //  String类型定义了几个用于在字符串中匹配模式的方法。第一个方法就是match()，在字符串上调用这个方法，被之上与调用RegExp的exec()方法相同。
       var text = 'cat, bat, sat, fat';
       var pattern = /.at/;

       //  与pattern.exec(text)相同
       var matched = text.match(pattern);
       console.log(matched.index);
       console.log(matched[0]);
       console.log(pattern.lastIndex);

       //  search()方法返回字符串中第一个匹配项的索引；如果没有找到匹配项，则返回-1.而且search()方法始终是从字符串开头向后查找模式
       var texted = 'cat, bat, sat, fat';
       var pos = text.search(/at/);
       console.log(pos);

       //  replace()方法接受两个参数：第一个参数可以是一个RegExp对象或者一个字符串（这个字符串不会被转换成正则表达式），第二个参数可以是一个字符串或者一个函数。
       //  如果第一个参数是字符串，那么只会替换第一个子字符串。要想替换所有子字符串，唯一的办法就是提供一个正则表达式，而且要指定全局（g）标记
       var text = 'cat, bat, sat, fat';
       var result = text.replace('at', 'ond');
       console.log(result);  //  cond, bat, sat, fat

       result = text.replace(/at/g, 'ond');
       console.log(result);  //  cond, bond, sond, fond

       //  replace()方法的第二个参数也可以是一个函数。在只有一个匹配项（即与模式匹配的字符串）的情况下，会向这个函数传递3个参数：模式的匹配项、模式匹配项在字符串中的位置和原始字符串。
	   function htmlEscape(text) {
	   	  return text.replace(/[<>"&]/g, function (match, pos, originalText) {
	   	  	  switch(match) {
	   	  	  	case "<": 
	   	  	  	  return "&lt;";
   	  	  	    case ">":
   	  	  	      return "&gt;";
	  	  	    case "&":
	  	  	      return "&amp;";
	  	  	    case "\"":
	  	  	      return "&quot;";    
	   	  	  }
	   	  });
	   }
	   console.log(htmlEscape("<p class=\"greeting\">Hello world!</p>"));
 
	   //  split()方法可以基于指定的分隔符将一个字符串分割成多个子字符串，并将结果放在一个数组中
	   var colorText = "red,blue,green,yellow";
	   var colors1 = colorText.split(',');
	   var colors2 = colorText.split(',', 2);
	   var colors3 = colorText.split(/[^\,]+/);
	   console.log('colors1=' + colors1);
	   console.log('colors2=' + colors2);
	   console.log(colors3);




    })();
</script>
</body>
</html>  